{"mappings":"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","sources":["src/js/04-timer-custom.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\r\nimport setTimer from './utils/setTimer';\r\nconst currentDate = new Date();\r\nconst currentDateMls = Date.parse(currentDate);\r\nlet delta = 0;\r\nlet interval;\r\n\r\nconst refs = {\r\n  sartBtn: document.querySelector('[data-start]'),\r\n  dataDays: document.querySelector('[data-days]'),\r\n  dataHours: document.querySelector('[data-hours]'),\r\n  dataMinutes: document.querySelector('[data-minutes]'),\r\n  dataSeconds: document.querySelector('[data-seconds]'),\r\n  timeInput: document.querySelector('input#datetime-picker'),\r\n};\r\n\r\nrefs.sartBtn.setAttribute('disabled', '');\r\n\r\nconst options = {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  // minDate: currentDate, //  Не дає вибрати дату меншу за поточну.\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    const selectedDateMls = Date.parse(selectedDates[0]);\r\n    delta = selectedDateMls - currentDateMls;\r\n    if (delta <= 0) {\r\n      Notify.warning('Please choose a date in the future\"');\r\n      return;\r\n    }\r\n    refs.sartBtn.removeAttribute('disabled');\r\n    setTimer(refs, delta);\r\n  },\r\n};\r\n\r\nconst fp = flatpickr('input#datetime-picker', options);\r\n\r\nrefs.sartBtn.addEventListener('click', startCD);\r\n\r\nfunction startCD() {\r\n  interval = setInterval(decreaseDelta, 1000);\r\n  refs.timeInput.setAttribute('disabled', '');\r\n  refs.sartBtn.removeEventListener('click', startCD);\r\n  refs.sartBtn.addEventListener('click', stopCD);\r\n  refs.sartBtn.textContent = 'Stop';\r\n  // delta = selectedDateMls - currentDateMls;\r\n}\r\n\r\nfunction stopCD() {\r\n  clearInterval(interval);\r\n  refs.sartBtn.removeEventListener('click', stopCD);\r\n  refs.sartBtn.addEventListener('click', startCD);\r\n  refs.sartBtn.textContent = 'Start';\r\n  refs.sartBtn.classList.toggle('visually-hidden');\r\n  createBTN();\r\n  console.log(delta);\r\n}\r\n\r\nfunction decreaseDelta() {\r\n  if (delta >= 0) {\r\n    delta = delta - 1000;\r\n    setTimer(refs, delta);\r\n    console.log(delta);\r\n  }\r\n  if (delta <= 0) {\r\n    refs.sartBtn.textContent = 'Start';\r\n    refs.sartBtn.setAttribute('disabled', '');\r\n    refs.timeInput.removeAttribute('disabled', '');\r\n    delta = 0;\r\n    setTimer(refs, delta);\r\n    clearInterval(interval);\r\n    Notify.info('Sorry. Time ran out.');\r\n    return;\r\n  }\r\n}\r\n\r\nfunction createBTN() {\r\n  const resetBTN = document.createElement('button');\r\n  resetBTN.setAttribute('type', 'button');\r\n  resetBTN.setAttribute('data-reset', '');\r\n  resetBTN.textContent = 'Reset';\r\n  resetBTN.addEventListener('click', resetTimer);\r\n  const continueBTN = document.createElement('button');\r\n  continueBTN.setAttribute('type', 'button');\r\n  continueBTN.setAttribute('data-continue', '');\r\n  continueBTN.textContent = 'Continue';\r\n  continueBTN.addEventListener('click', continueTimer);\r\n  refs.timeInput.insertAdjacentElement('afterend', resetBTN);\r\n  refs.timeInput.insertAdjacentElement('afterend', continueBTN);\r\n}\r\n\r\nfunction resetTimer() {\r\n  delta = 0;\r\n  setTimer(refs, delta);\r\n  refs.timeInput.removeAttribute('disabled', '');\r\n  refs.sartBtn.classList.toggle('visually-hidden');\r\n  refs.sartBtn.setAttribute('disabled', '');\r\n  document.querySelector('[data-reset]').remove();\r\n  document.querySelector('[data-continue]').remove();\r\n}\r\nfunction continueTimer() {\r\n  const currentDate2 = new Date();\r\n  const currentDateMls2 = Date.parse(currentDate2);\r\n  delta = Date.parse(fp.selectedDates[0]) - currentDateMls2;\r\n  console.log(delta);\r\n  interval = setInterval(decreaseDelta, 1000);\r\n  document.querySelector('[data-reset]').remove();\r\n  document.querySelector('[data-continue]').remove();\r\n  refs.sartBtn.classList.toggle('visually-hidden');\r\n  refs.sartBtn.removeEventListener('click', startCD);\r\n  refs.sartBtn.addEventListener('click', stopCD);\r\n  refs.sartBtn.textContent = 'Stop';\r\n}\r\n"],"names":["$fbklV","parcelRequire","$29fdcf56b5828cf5$var$currentDate","Date","$29fdcf56b5828cf5$var$currentDateMls","parse","$29fdcf56b5828cf5$var$interval","$29fdcf56b5828cf5$var$delta","$29fdcf56b5828cf5$var$refs","sartBtn","document","querySelector","dataDays","dataHours","dataMinutes","dataSeconds","timeInput","setAttribute","$29fdcf56b5828cf5$var$options","enableTime","time_24hr","defaultDate","minuteIncrement","onClose","selectedDates","selectedDateMls","$iQIUW","Notify","warning","removeAttribute","$h4Mxw","default","$29fdcf56b5828cf5$var$fp","$29fdcf56b5828cf5$var$startCD","setInterval","$29fdcf56b5828cf5$var$decreaseDelta","removeEventListener","addEventListener","$29fdcf56b5828cf5$var$stopCD","textContent","clearInterval","classList","toggle","resetBTN","createElement","$29fdcf56b5828cf5$var$resetTimer","continueBTN","$29fdcf56b5828cf5$var$continueTimer","insertAdjacentElement","$29fdcf56b5828cf5$var$createBTN","console","log","info","remove","currentDate2","currentDateMls2"],"version":3,"file":"04-timer-custom.04fd1dee.js.map"}